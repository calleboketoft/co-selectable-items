var fixtures_1 = require('./fixtures');
var co_selectable_items_cmp_1 = require('../../co-selectable-items/co-selectable-items-cmp');
describe('CoSelectableItemsCmp', function () {
    it('Should be defined', function () {
        expect(co_selectable_items_cmp_1.CoSelectableItemsCmp).toBeDefined();
    });
    it('Should initialise values correctly', function () {
        var cmp = initCmp();
        expect(fixtures_1.default().initDone).toEqual(cmp.selectableItems);
    });
    it('Should initialise values correctly even if object properties are ordered differently', function () {
        var cmp = initCmp(null, fixtures_1.default().initSelectedDifferentPropOrder);
        expect(fixtures_1.default().initDone).toEqual(cmp.selectableItems);
    });
    it('Should be able to filter on exact partial match', function () {
        var cmp = new co_selectable_items_cmp_1.CoSelectableItemsCmp();
        var matched = cmp.filterItem('SomeString', 'Some');
        expect(matched).toBe(true);
    });
    it('Should be able to filter on case insensitive partial match', function () {
        var cmp = new co_selectable_items_cmp_1.CoSelectableItemsCmp();
        var matched = cmp.filterItem('SomeString', 'so');
        expect(matched).toBe(true);
    });
    it('Should not hide selectable when filtering selected', function () {
        var cmp = new co_selectable_items_cmp_1.CoSelectableItemsCmp();
        var selectableList = fixtures_1.default().filterIsolatedBefore;
        cmp.filterSelected(selectableList, 'Random');
        var selectedExpected = fixtures_1.default().filterIsolatedSelectedAfter;
        expect(selectableList).toEqual(selectedExpected);
    });
    it('Should not hide selected when filtering selectable', function () {
        var cmp = new co_selectable_items_cmp_1.CoSelectableItemsCmp();
        var selectableList = fixtures_1.default().filterIsolatedBefore;
        cmp.filterSelectable(selectableList, 'Random');
        expect(selectableList).toEqual(fixtures_1.default().filterIsolatedSelectableAfter);
    });
    it('Should be able to select item', function () {
        var cmp = initCmp();
        cmp.selectItem(cmp.selectableItems[1]);
        expect(cmp.selectedItems).toEqual(fixtures_1.default().selectedBearSelected);
        expect(cmp.selectableItems).toEqual(fixtures_1.default().selectedBearSelectable);
    });
    it('Should be able to deselect item', function () {
        var cmp = initCmp();
        cmp.deselectItem(cmp.selectableItems[2]);
        expect(cmp.selectedItems).toEqual(fixtures_1.default().deselectedCactusSelected);
        expect(cmp.selectableItems).toEqual(fixtures_1.default().deselectedCactusSelectable);
    });
    it('Should deselect item even if object properties are ordered differently', function () {
        var cmp = initCmp(null, fixtures_1.default().initSelectedDifferentPropOrder);
        cmp.deselectItem(cmp.selectableItems[2]);
        expect(cmp.selectedItems).toEqual(fixtures_1.default().deselectedCactusSelected);
        expect(cmp.selectableItems).toEqual(fixtures_1.default().deselectedCactusSelectable);
    });
    it('Should be able to select all filtered in selectable', function () {
        var cmp = initCmp();
        cmp.filterSelectable(cmp.selectableItems, 'a');
        cmp.selectAllFiltered();
        expect(cmp.selectableItems).toEqual(fixtures_1.default().selectFilteredSelectable);
        expect(cmp.selectedItems).toEqual(fixtures_1.default().selectFilteredSelected);
    });
    it('Should be able to deselect all filtered in selected', function () {
        var cmp = initCmp();
        cmp.filterSelected(cmp.selectableItems, 'ac');
        cmp.deselectAllFiltered();
        expect(cmp.selectableItems).toEqual(fixtures_1.default().deselectFilteredSelectable);
        expect(cmp.selectedItems).toEqual(fixtures_1.default().deselectFilteredSelected);
    });
    // Rules for hiding items
    it('Should hide selected items from the selectable list', function () {
        var cmp = initCmp();
        expect(cmp.shouldHide(fixtures_1.default().itemSelectedNoFilter, 'selectable')).toBe(true);
        expect(cmp.shouldHide(fixtures_1.default().itemSelectedFilteredOutSelected, 'selectable')).toBe(true);
        expect(cmp.shouldHide(fixtures_1.default().itemSelectedFilteredOutSelectable, 'selectable')).toBe(true);
        expect(cmp.shouldHide(fixtures_1.default().itemSelectedFilteredOutBoth, 'selectable')).toBe(true);
    });
    it('Should hide not-selected items from the selected list', function () {
        var cmp = initCmp();
        expect(cmp.shouldHide(fixtures_1.default().itemNotSelectedNoFilter, 'selected')).toBe(true);
        expect(cmp.shouldHide(fixtures_1.default().itemNotSelectedFilteredOutSelected, 'selected')).toBe(true);
        expect(cmp.shouldHide(fixtures_1.default().itemNotSelectedFilteredOutSelectable, 'selected')).toBe(true);
        expect(cmp.shouldHide(fixtures_1.default().itemNotSelectedFilteredOutBoth, 'selected')).toBe(true);
    });
    it('Should hide filtered out selectable items from the selectable list', function () {
        var cmp = initCmp();
        expect(cmp.shouldHide(fixtures_1.default().itemNotSelectedFilteredOutSelectable, 'selectable')).toBe(true);
        expect(cmp.shouldHide(fixtures_1.default().itemNotSelectedFilteredOutBoth, 'selectable')).toBe(true);
    });
    it('Should hide filtered out selected items from the selected list', function () {
        var cmp = initCmp();
        expect(cmp.shouldHide(fixtures_1.default().itemSelectedFilteredOutSelected, 'selected')).toBe(true);
        expect(cmp.shouldHide(fixtures_1.default().itemSelectedFilteredOutBoth, 'selected')).toBe(true);
    });
    it('Should not hide non-filtered non-selected items from the selectable list', function () {
        var cmp = initCmp();
        expect(cmp.shouldHide(fixtures_1.default().itemNotSelectedNoFilter, 'selectable')).toBe(false);
        expect(cmp.shouldHide(fixtures_1.default().itemNotSelectedFilteredOutSelected, 'selectable')).toBe(false);
    });
    it('Should not hide non-filtered selected items from the selected list', function () {
        var cmp = initCmp();
        expect(cmp.shouldHide(fixtures_1.default().itemSelectedNoFilter, 'selected')).toBe(false);
        expect(cmp.shouldHide(fixtures_1.default().itemSelectedFilteredOutSelectable, 'selected')).toBe(false);
    });
});
// Instantiate component and initialize values
function initCmp(selectable, selected) {
    var cmp = new co_selectable_items_cmp_1.CoSelectableItemsCmp();
    cmp.selectableItems = selectable || fixtures_1.default().initSelectable;
    cmp.selectedItems = selected || fixtures_1.default().initSelected;
    cmp.initValues();
    return cmp;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvdW5pdC9jby1zZWxlY3RhYmxlLWl0ZW1zLWNtcC5zcGVjLnRzIl0sIm5hbWVzIjpbImluaXRDbXAiXSwibWFwcGluZ3MiOiJBQUFBLHlCQUFxQixZQUNyQixDQUFDLENBRGdDO0FBQ2pDLHdDQUFxQyxtREFFckMsQ0FBQyxDQUZ1RjtBQUV4RixRQUFRLENBQUMsc0JBQXNCLEVBQUU7SUFDL0IsRUFBRSxDQUFDLG1CQUFtQixFQUFFO1FBQ3RCLE1BQU0sQ0FBQyw4Q0FBb0IsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFBO0lBQzVDLENBQUMsQ0FBQyxDQUFBO0lBRUYsRUFBRSxDQUFDLG9DQUFvQyxFQUFFO1FBQ3ZDLElBQUksR0FBRyxHQUFHLE9BQU8sRUFBRSxDQUFBO1FBQ25CLE1BQU0sQ0FBQyxrQkFBUSxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsQ0FBQTtJQUMxRCxDQUFDLENBQUMsQ0FBQTtJQUVGLEVBQUUsQ0FBQyxzRkFBc0YsRUFBRTtRQUN6RixJQUFJLEdBQUcsR0FBRyxPQUFPLENBQUMsSUFBSSxFQUFFLGtCQUFRLEVBQUUsQ0FBQyw4QkFBOEIsQ0FBQyxDQUFBO1FBQ2xFLE1BQU0sQ0FBQyxrQkFBUSxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsQ0FBQTtJQUMxRCxDQUFDLENBQUMsQ0FBQTtJQUVGLEVBQUUsQ0FBQyxpREFBaUQsRUFBRTtRQUNwRCxJQUFJLEdBQUcsR0FBRyxJQUFJLDhDQUFvQixFQUFFLENBQUE7UUFDcEMsSUFBSSxPQUFPLEdBQUcsR0FBRyxDQUFDLFVBQVUsQ0FBQyxZQUFZLEVBQUUsTUFBTSxDQUFDLENBQUE7UUFDbEQsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUM1QixDQUFDLENBQUMsQ0FBQTtJQUVGLEVBQUUsQ0FBQyw0REFBNEQsRUFBRTtRQUMv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QUFFLENBQUMsb0JBQW9CLEVBQUUsVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDL0UsTUFBTSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsa0JBQVEsRUFBRSxDQUFDLGlDQUFpQyxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFBO0lBQzlGLENBQUMsQ0FBQyxDQUFBO0FBQ0osQ0FBQyxDQUFDLENBQUE7QUFFRiw4Q0FBOEM7QUFDOUMsaUJBQWtCLFVBQVcsRUFBRSxRQUFTO0lBQ3RDQSxJQUFJQSxHQUFHQSxHQUFHQSxJQUFJQSw4Q0FBb0JBLEVBQUVBLENBQUFBO0lBQ3BDQSxHQUFHQSxDQUFDQSxlQUFlQSxHQUFHQSxVQUFVQSxJQUFJQSxrQkFBUUEsRUFBRUEsQ0FBQ0EsY0FBY0EsQ0FBQUE7SUFDN0RBLEdBQUdBLENBQUNBLGFBQWFBLEdBQUdBLFFBQVFBLElBQUlBLGtCQUFRQSxFQUFFQSxDQUFDQSxZQUFZQSxDQUFBQTtJQUN2REEsR0FBR0EsQ0FBQ0EsVUFBVUEsRUFBRUEsQ0FBQUE7SUFDaEJBLE1BQU1BLENBQUNBLEdBQUdBLENBQUFBO0FBQ1pBLENBQUNBIiwiZmlsZSI6InRlc3QvdW5pdC9jby1zZWxlY3RhYmxlLWl0ZW1zLWNtcC5zcGVjLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZpeHR1cmVzIGZyb20gJy4vZml4dHVyZXMnXG5pbXBvcnQgeyBDb1NlbGVjdGFibGVJdGVtc0NtcCB9IGZyb20gJy4uLy4uL2NvLXNlbGVjdGFibGUtaXRlbXMvY28tc2VsZWN0YWJsZS1pdGVtcy1jbXAnXG5cbmRlc2NyaWJlKCdDb1NlbGVjdGFibGVJdGVtc0NtcCcsICgpID0+IHtcbiAgaXQoJ1Nob3VsZCBiZSBkZWZpbmVkJywgKCkgPT4ge1xuICAgIGV4cGVjdChDb1NlbGVjdGFibGVJdGVtc0NtcCkudG9CZURlZmluZWQoKVxuICB9KVxuXG4gIGl0KCdTaG91bGQgaW5pdGlhbGlzZSB2YWx1ZXMgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgIGxldCBjbXAgPSBpbml0Q21wKClcbiAgICBleHBlY3QoZml4dHVyZXMoKS5pbml0RG9uZSkudG9FcXVhbChjbXAuc2VsZWN0YWJsZUl0ZW1zKVxuICB9KVxuXG4gIGl0KCdTaG91bGQgaW5pdGlhbGlzZSB2YWx1ZXMgY29ycmVjdGx5IGV2ZW4gaWYgb2JqZWN0IHByb3BlcnRpZXMgYXJlIG9yZGVyZWQgZGlmZmVyZW50bHknLCAoKSA9PiB7XG4gICAgbGV0IGNtcCA9IGluaXRDbXAobnVsbCwgZml4dHVyZXMoKS5pbml0U2VsZWN0ZWREaWZmZXJlbnRQcm9wT3JkZXIpXG4gICAgZXhwZWN0KGZpeHR1cmVzKCkuaW5pdERvbmUpLnRvRXF1YWwoY21wLnNlbGVjdGFibGVJdGVtcylcbiAgfSlcblxuICBpdCgnU2hvdWxkIGJlIGFibGUgdG8gZmlsdGVyIG9uIGV4YWN0IHBhcnRpYWwgbWF0Y2gnLCAoKSA9PiB7XG4gICAgbGV0IGNtcCA9IG5ldyBDb1NlbGVjdGFibGVJdGVtc0NtcCgpXG4gICAgbGV0IG1hdGNoZWQgPSBjbXAuZmlsdGVySXRlbSgnU29tZVN0cmluZycsICdTb21lJylcbiAgICBleHBlY3QobWF0Y2hlZCkudG9CZSh0cnVlKVxuICB9KVxuXG4gIGl0KCdTaG91bGQgYmUgYWJsZSB0byBmaWx0ZXIgb24gY2FzZSBpbnNlbnNpdGl2ZSBwYXJ0aWFsIG1hdGNoJywgKCkgPT4ge1xuICAgIGxldCBjbXAgPSBuZXcgQ29TZWxlY3RhYmxlSXRlbXNDbXAoKVxuICAgIGxldCBtYXRjaGVkID0gY21wLmZpbHRlckl0ZW0oJ1NvbWVTdHJpbmcnLCAnc28nKVxuICAgIGV4cGVjdChtYXRjaGVkKS50b0JlKHRydWUpXG4gIH0pXG5cbiAgaXQoJ1Nob3VsZCBub3QgaGlkZSBzZWxlY3RhYmxlIHdoZW4gZmlsdGVyaW5nIHNlbGVjdGVkJywgKCkgPT4ge1xuICAgIGxldCBjbXAgPSBuZXcgQ29TZWxlY3RhYmxlSXRlbXNDbXAoKVxuICAgIGxldCBzZWxlY3RhYmxlTGlzdCA9IGZpeHR1cmVzKCkuZmlsdGVySXNvbGF0ZWRCZWZvcmVcbiAgICBjbXAuZmlsdGVyU2VsZWN0ZWQoc2VsZWN0YWJsZUxpc3QsICdSYW5kb20nKVxuICAgIGxldCBzZWxlY3RlZEV4cGVjdGVkID0gZml4dHVyZXMoKS5maWx0ZXJJc29sYXRlZFNlbGVjdGVkQWZ0ZXJcbiAgICBleHBlY3Qoc2VsZWN0YWJsZUxpc3QpLnRvRXF1YWwoc2VsZWN0ZWRFeHBlY3RlZClcbiAgfSlcblxuICBpdCgnU2hvdWxkIG5vdCBoaWRlIHNlbGVjdGVkIHdoZW4gZmlsdGVyaW5nIHNlbGVjdGFibGUnLCAoKSA9PiB7XG4gICAgbGV0IGNtcCA9IG5ldyBDb1NlbGVjdGFibGVJdGVtc0NtcCgpXG4gICAgbGV0IHNlbGVjdGFibGVMaXN0ID0gZml4dHVyZXMoKS5maWx0ZXJJc29sYXRlZEJlZm9yZVxuICAgIGNtcC5maWx0ZXJTZWxlY3RhYmxlKHNlbGVjdGFibGVMaXN0LCAnUmFuZG9tJylcbiAgICBleHBlY3Qoc2VsZWN0YWJsZUxpc3QpLnRvRXF1YWwoZml4dHVyZXMoKS5maWx0ZXJJc29sYXRlZFNlbGVjdGFibGVBZnRlcilcbiAgfSlcblxuICBpdCgnU2hvdWxkIGJlIGFibGUgdG8gc2VsZWN0IGl0ZW0nLCAoKSA9PiB7XG4gICAgbGV0IGNtcCA9IGluaXRDbXAoKVxuICAgIGNtcC5zZWxlY3RJdGVtKGNtcC5zZWxlY3RhYmxlSXRlbXNbMV0pXG4gICAgZXhwZWN0KGNtcC5zZWxlY3RlZEl0ZW1zKS50b0VxdWFsKGZpeHR1cmVzKCkuc2VsZWN0ZWRCZWFyU2VsZWN0ZWQpXG4gICAgZXhwZWN0KGNtcC5zZWxlY3RhYmxlSXRlbXMpLnRvRXF1YWwoZml4dHVyZXMoKS5zZWxlY3RlZEJlYXJTZWxlY3RhYmxlKVxuICB9KVxuXG4gIGl0KCdTaG91bGQgYmUgYWJsZSB0byBkZXNlbGVjdCBpdGVtJywgKCkgPT4ge1xuICAgIGxldCBjbXAgPSBpbml0Q21wKClcbiAgICBjbXAuZGVzZWxlY3RJdGVtKGNtcC5zZWxlY3RhYmxlSXRlbXNbMl0pXG4gICAgZXhwZWN0KGNtcC5zZWxlY3RlZEl0ZW1zKS50b0VxdWFsKGZpeHR1cmVzKCkuZGVzZWxlY3RlZENhY3R1c1NlbGVjdGVkKVxuICAgIGV4cGVjdChjbXAuc2VsZWN0YWJsZUl0ZW1zKS50b0VxdWFsKGZpeHR1cmVzKCkuZGVzZWxlY3RlZENhY3R1c1NlbGVjdGFibGUpXG4gIH0pXG5cbiAgaXQoJ1Nob3VsZCBkZXNlbGVjdCBpdGVtIGV2ZW4gaWYgb2JqZWN0IHByb3BlcnRpZXMgYXJlIG9yZGVyZWQgZGlmZmVyZW50bHknLCAoKSA9PiB7XG4gICAgbGV0IGNtcCA9IGluaXRDbXAobnVsbCwgZml4dHVyZXMoKS5pbml0U2VsZWN0ZWREaWZmZXJlbnRQcm9wT3JkZXIpXG4gICAgY21wLmRlc2VsZWN0SXRlbShjbXAuc2VsZWN0YWJsZUl0ZW1zWzJdKVxuICAgIGV4cGVjdChjbXAuc2VsZWN0ZWRJdGVtcykudG9FcXVhbChmaXh0dXJlcygpLmRlc2VsZWN0ZWRDYWN0dXNTZWxlY3RlZClcbiAgICBleHBlY3QoY21wLnNlbGVjdGFibGVJdGVtcykudG9FcXVhbChmaXh0dXJlcygpLmRlc2VsZWN0ZWRDYWN0dXNTZWxlY3RhYmxlKVxuICB9KVxuXG4gIGl0KCdTaG91bGQgYmUgYWJsZSB0byBzZWxlY3QgYWxsIGZpbHRlcmVkIGluIHNlbGVjdGFibGUnLCAoKSA9PiB7XG4gICAgbGV0IGNtcCA9IGluaXRDbXAoKVxuICAgIGNtcC5maWx0ZXJTZWxlY3RhYmxlKGNtcC5zZWxlY3RhYmxlSXRlbXMsICdhJylcbiAgICBjbXAuc2VsZWN0QWxsRmlsdGVyZWQoKVxuICAgIGV4cGVjdChjbXAuc2VsZWN0YWJsZUl0ZW1zKS50b0VxdWFsKGZpeHR1cmVzKCkuc2VsZWN0RmlsdGVyZWRTZWxlY3RhYmxlKVxuICAgIGV4cGVjdChjbXAuc2VsZWN0ZWRJdGVtcykudG9FcXVhbChmaXh0dXJlcygpLnNlbGVjdEZpbHRlcmVkU2VsZWN0ZWQpXG4gIH0pXG5cbiAgaXQoJ1Nob3VsZCBiZSBhYmxlIHRvIGRlc2VsZWN0IGFsbCBmaWx0ZXJlZCBpbiBzZWxlY3RlZCcsICgpID0+IHtcbiAgICBsZXQgY21wID0gaW5pdENtcCgpXG4gICAgY21wLmZpbHRlclNlbGVjdGVkKGNtcC5zZWxlY3RhYmxlSXRlbXMsICdhYycpXG4gICAgY21wLmRlc2VsZWN0QWxsRmlsdGVyZWQoKVxuICAgIGV4cGVjdChjbXAuc2VsZWN0YWJsZUl0ZW1zKS50b0VxdWFsKGZpeHR1cmVzKCkuZGVzZWxlY3RGaWx0ZXJlZFNlbGVjdGFibGUpXG4gICAgZXhwZWN0KGNtcC5zZWxlY3RlZEl0ZW1zKS50b0VxdWFsKGZpeHR1cmVzKCkuZGVzZWxlY3RGaWx0ZXJlZFNlbGVjdGVkKVxuICB9KVxuXG4gIC8vIFJ1bGVzIGZvciBoaWRpbmcgaXRlbXNcblxuICBpdCgnU2hvdWxkIGhpZGUgc2VsZWN0ZWQgaXRlbXMgZnJvbSB0aGUgc2VsZWN0YWJsZSBsaXN0JywgKCkgPT4ge1xuICAgIGxldCBjbXAgPSBpbml0Q21wKClcbiAgICBleHBlY3QoY21wLnNob3VsZEhpZGUoZml4dHVyZXMoKS5pdGVtU2VsZWN0ZWROb0ZpbHRlciwgJ3NlbGVjdGFibGUnKSkudG9CZSh0cnVlKVxuICAgIGV4cGVjdChjbXAuc2hvdWxkSGlkZShmaXh0dXJlcygpLml0ZW1TZWxlY3RlZEZpbHRlcmVkT3V0U2VsZWN0ZWQsICdzZWxlY3RhYmxlJykpLnRvQmUodHJ1ZSlcbiAgICBleHBlY3QoY21wLnNob3VsZEhpZGUoZml4dHVyZXMoKS5pdGVtU2VsZWN0ZWRGaWx0ZXJlZE91dFNlbGVjdGFibGUsICdzZWxlY3RhYmxlJykpLnRvQmUodHJ1ZSlcbiAgICBleHBlY3QoY21wLnNob3VsZEhpZGUoZml4dHVyZXMoKS5pdGVtU2VsZWN0ZWRGaWx0ZXJlZE91dEJvdGgsICdzZWxlY3RhYmxlJykpLnRvQmUodHJ1ZSlcbiAgfSlcblxuICBpdCgnU2hvdWxkIGhpZGUgbm90LXNlbGVjdGVkIGl0ZW1zIGZyb20gdGhlIHNlbGVjdGVkIGxpc3QnLCAoKSA9PiB7XG4gICAgbGV0IGNtcCA9IGluaXRDbXAoKVxuICAgIGV4cGVjdChjbXAuc2hvdWxkSGlkZShmaXh0dXJlcygpLml0ZW1Ob3RTZWxlY3RlZE5vRmlsdGVyLCAnc2VsZWN0ZWQnKSkudG9CZSh0cnVlKVxuICAgIGV4cGVjdChjbXAuc2hvdWxkSGlkZShmaXh0dXJlcygpLml0ZW1Ob3RTZWxlY3RlZEZpbHRlcmVkT3V0U2VsZWN0ZWQsICdzZWxlY3RlZCcpKS50b0JlKHRydWUpXG4gICAgZXhwZWN0KGNtcC5zaG91bGRIaWRlKGZpeHR1cmVzKCkuaXRlbU5vdFNlbGVjdGVkRmlsdGVyZWRPdXRTZWxlY3RhYmxlLCAnc2VsZWN0ZWQnKSkudG9CZSh0cnVlKVxuICAgIGV4cGVjdChjbXAuc2hvdWxkSGlkZShmaXh0dXJlcygpLml0ZW1Ob3RTZWxlY3RlZEZpbHRlcmVkT3V0Qm90aCwgJ3NlbGVjdGVkJykpLnRvQmUodHJ1ZSlcbiAgfSlcblxuICBpdCgnU2hvdWxkIGhpZGUgZmlsdGVyZWQgb3V0IHNlbGVjdGFibGUgaXRlbXMgZnJvbSB0aGUgc2VsZWN0YWJsZSBsaXN0JywgKCkgPT4ge1xuICAgIGxldCBjbXAgPSBpbml0Q21wKClcbiAgICBleHBlY3QoY21wLnNob3VsZEhpZGUoZml4dHVyZXMoKS5pdGVtTm90U2VsZWN0ZWRGaWx0ZXJlZE91dFNlbGVjdGFibGUsICdzZWxlY3RhYmxlJykpLnRvQmUodHJ1ZSlcbiAgICBleHBlY3QoY21wLnNob3VsZEhpZGUoZml4dHVyZXMoKS5pdGVtTm90U2VsZWN0ZWRGaWx0ZXJlZE91dEJvdGgsICdzZWxlY3RhYmxlJykpLnRvQmUodHJ1ZSlcbiAgfSlcblxuICBpdCgnU2hvdWxkIGhpZGUgZmlsdGVyZWQgb3V0IHNlbGVjdGVkIGl0ZW1zIGZyb20gdGhlIHNlbGVjdGVkIGxpc3QnLCAoKSA9PiB7XG4gICAgbGV0IGNtcCA9IGluaXRDbXAoKVxuICAgIGV4cGVjdChjbXAuc2hvdWxkSGlkZShmaXh0dXJlcygpLml0ZW1TZWxlY3RlZEZpbHRlcmVkT3V0U2VsZWN0ZWQsICdzZWxlY3RlZCcpKS50b0JlKHRydWUpXG4gICAgZXhwZWN0KGNtcC5zaG91bGRIaWRlKGZpeHR1cmVzKCkuaXRlbVNlbGVjdGVkRmlsdGVyZWRPdXRCb3RoLCAnc2VsZWN0ZWQnKSkudG9CZSh0cnVlKVxuICB9KVxuXG4gIGl0KCdTaG91bGQgbm90IGhpZGUgbm9uLWZpbHRlcmVkIG5vbi1zZWxlY3RlZCBpdGVtcyBmcm9tIHRoZSBzZWxlY3RhYmxlIGxpc3QnLCAoKSA9PiB7XG4gICAgbGV0IGNtcCA9IGluaXRDbXAoKVxuICAgIGV4cGVjdChjbXAuc2hvdWxkSGlkZShmaXh0dXJlcygpLml0ZW1Ob3RTZWxlY3RlZE5vRmlsdGVyLCAnc2VsZWN0YWJsZScpKS50b0JlKGZhbHNlKVxuICAgIGV4cGVjdChjbXAuc2hvdWxkSGlkZShmaXh0dXJlcygpLml0ZW1Ob3RTZWxlY3RlZEZpbHRlcmVkT3V0U2VsZWN0ZWQsICdzZWxlY3RhYmxlJykpLnRvQmUoZmFsc2UpXG4gIH0pXG5cbiAgaXQoJ1Nob3VsZCBub3QgaGlkZSBub24tZmlsdGVyZWQgc2VsZWN0ZWQgaXRlbXMgZnJvbSB0aGUgc2VsZWN0ZWQgbGlzdCcsICgpID0+IHtcbiAgICBsZXQgY21wID0gaW5pdENtcCgpXG4gICAgZXhwZWN0KGNtcC5zaG91bGRIaWRlKGZpeHR1cmVzKCkuaXRlbVNlbGVjdGVkTm9GaWx0ZXIsICdzZWxlY3RlZCcpKS50b0JlKGZhbHNlKVxuICAgIGV4cGVjdChjbXAuc2hvdWxkSGlkZShmaXh0dXJlcygpLml0ZW1TZWxlY3RlZEZpbHRlcmVkT3V0U2VsZWN0YWJsZSwgJ3NlbGVjdGVkJykpLnRvQmUoZmFsc2UpXG4gIH0pXG59KVxuXG4vLyBJbnN0YW50aWF0ZSBjb21wb25lbnQgYW5kIGluaXRpYWxpemUgdmFsdWVzXG5mdW5jdGlvbiBpbml0Q21wIChzZWxlY3RhYmxlPywgc2VsZWN0ZWQ/KSB7XG4gIGxldCBjbXAgPSBuZXcgQ29TZWxlY3RhYmxlSXRlbXNDbXAoKVxuICBjbXAuc2VsZWN0YWJsZUl0ZW1zID0gc2VsZWN0YWJsZSB8fCBmaXh0dXJlcygpLmluaXRTZWxlY3RhYmxlXG4gIGNtcC5zZWxlY3RlZEl0ZW1zID0gc2VsZWN0ZWQgfHwgZml4dHVyZXMoKS5pbml0U2VsZWN0ZWRcbiAgY21wLmluaXRWYWx1ZXMoKVxuICByZXR1cm4gY21wXG59Il0sInNvdXJjZVJvb3QiOiIvbm9kZV9tb2R1bGVzIn0=
