"use strict";
var testing_1 = require('angular2/testing');
var fixtures_1 = require('./fixtures');
var co_selectable_items_cmp_1 = require('../../co-selectable-items/co-selectable-items-cmp');
testing_1.describe('CoSelectableItemsCmp', function () {
    testing_1.it('Should be defined', function () {
        testing_1.expect(co_selectable_items_cmp_1.CoSelectableItemsCmp).toBeDefined();
    });
    testing_1.it('Should initialise values correctly', function () {
        var cmp = initCmp();
        testing_1.expect(fixtures_1.default().initDone).toEqual(cmp.selectableItems);
    });
    testing_1.it('Should initialise values correctly even if object properties are ordered differently', function () {
        var cmp = initCmp(null, fixtures_1.default().initSelectedDifferentPropOrder);
        testing_1.expect(fixtures_1.default().initDone).toEqual(cmp.selectableItems);
    });
    testing_1.it('Should be able to filter on exact partial match', function () {
        var cmp = new co_selectable_items_cmp_1.CoSelectableItemsCmp();
        var matched = cmp.filterItem('SomeString', 'Some');
        testing_1.expect(matched).toBe(true);
    });
    testing_1.it('Should be able to filter on case insensitive partial match', function () {
        var cmp = new co_selectable_items_cmp_1.CoSelectableItemsCmp();
        var matched = cmp.filterItem('SomeString', 'so');
        testing_1.expect(matched).toBe(true);
    });
    testing_1.it('Should not hide selectable when filtering selected', function () {
        var cmp = new co_selectable_items_cmp_1.CoSelectableItemsCmp();
        var selectableList = fixtures_1.default().filterIsolatedBefore;
        cmp.filterSelected(selectableList, 'Random');
        var selectedExpected = fixtures_1.default().filterIsolatedSelectedAfter;
        testing_1.expect(selectableList).toEqual(selectedExpected);
    });
    testing_1.it('Should not hide selected when filtering selectable', function () {
        var cmp = new co_selectable_items_cmp_1.CoSelectableItemsCmp();
        var selectableList = fixtures_1.default().filterIsolatedBefore;
        cmp.filterSelectable(selectableList, 'Random');
        testing_1.expect(selectableList).toEqual(fixtures_1.default().filterIsolatedSelectableAfter);
    });
    testing_1.it('Should be able to select item', function () {
        var cmp = initCmp();
        cmp.selectItem(cmp.selectableItems[1]);
        testing_1.expect(cmp.selectedItems).toEqual(fixtures_1.default().selectedBearSelected);
        testing_1.expect(cmp.selectableItems).toEqual(fixtures_1.default().selectedBearSelectable);
    });
    testing_1.it('Should be able to deselect item', function () {
        var cmp = initCmp();
        cmp.deselectItem(cmp.selectableItems[2]);
        testing_1.expect(cmp.selectedItems).toEqual(fixtures_1.default().deselectedCactusSelected);
        testing_1.expect(cmp.selectableItems).toEqual(fixtures_1.default().deselectedCactusSelectable);
    });
    testing_1.it('Should deselect item even if object properties are ordered differently', function () {
        var cmp = initCmp(null, fixtures_1.default().initSelectedDifferentPropOrder);
        cmp.deselectItem(cmp.selectableItems[2]);
        testing_1.expect(cmp.selectedItems).toEqual(fixtures_1.default().deselectedCactusSelected);
        testing_1.expect(cmp.selectableItems).toEqual(fixtures_1.default().deselectedCactusSelectable);
    });
    testing_1.it('Should be able to select all filtered in selectable', function () {
        var cmp = initCmp();
        cmp.filterSelectable(cmp.selectableItems, 'a');
        cmp.selectAllFiltered();
        testing_1.expect(cmp.selectableItems).toEqual(fixtures_1.default().selectFilteredSelectable);
        testing_1.expect(cmp.selectedItems).toEqual(fixtures_1.default().selectFilteredSelected);
    });
    testing_1.it('Should be able to deselect all filtered in selected', function () {
        var cmp = initCmp();
        cmp.filterSelected(cmp.selectableItems, 'ac');
        cmp.deselectAllFiltered();
        testing_1.expect(cmp.selectableItems).toEqual(fixtures_1.default().deselectFilteredSelectable);
        testing_1.expect(cmp.selectedItems).toEqual(fixtures_1.default().deselectFilteredSelected);
    });
    // Rules for hiding items
    testing_1.it('Should hide selected items from the selectable list', function () {
        var cmp = initCmp();
        testing_1.expect(cmp.shouldHide(fixtures_1.default().itemSelectedNoFilter, 'selectable')).toBe(true);
        testing_1.expect(cmp.shouldHide(fixtures_1.default().itemSelectedFilteredOutSelected, 'selectable')).toBe(true);
        testing_1.expect(cmp.shouldHide(fixtures_1.default().itemSelectedFilteredOutSelectable, 'selectable')).toBe(true);
        testing_1.expect(cmp.shouldHide(fixtures_1.default().itemSelectedFilteredOutBoth, 'selectable')).toBe(true);
    });
    testing_1.it('Should hide not-selected items from the selected list', function () {
        var cmp = initCmp();
        testing_1.expect(cmp.shouldHide(fixtures_1.default().itemNotSelectedNoFilter, 'selected')).toBe(true);
        testing_1.expect(cmp.shouldHide(fixtures_1.default().itemNotSelectedFilteredOutSelected, 'selected')).toBe(true);
        testing_1.expect(cmp.shouldHide(fixtures_1.default().itemNotSelectedFilteredOutSelectable, 'selected')).toBe(true);
        testing_1.expect(cmp.shouldHide(fixtures_1.default().itemNotSelectedFilteredOutBoth, 'selected')).toBe(true);
    });
    testing_1.it('Should hide filtered out selectable items from the selectable list', function () {
        var cmp = initCmp();
        testing_1.expect(cmp.shouldHide(fixtures_1.default().itemNotSelectedFilteredOutSelectable, 'selectable')).toBe(true);
        testing_1.expect(cmp.shouldHide(fixtures_1.default().itemNotSelectedFilteredOutBoth, 'selectable')).toBe(true);
    });
    testing_1.it('Should hide filtered out selected items from the selected list', function () {
        var cmp = initCmp();
        testing_1.expect(cmp.shouldHide(fixtures_1.default().itemSelectedFilteredOutSelected, 'selected')).toBe(true);
        testing_1.expect(cmp.shouldHide(fixtures_1.default().itemSelectedFilteredOutBoth, 'selected')).toBe(true);
    });
    testing_1.it('Should not hide non-filtered non-selected items from the selectable list', function () {
        var cmp = initCmp();
        testing_1.expect(cmp.shouldHide(fixtures_1.default().itemNotSelectedNoFilter, 'selectable')).toBe(false);
        testing_1.expect(cmp.shouldHide(fixtures_1.default().itemNotSelectedFilteredOutSelected, 'selectable')).toBe(false);
    });
    testing_1.it('Should not hide non-filtered selected items from the selected list', function () {
        var cmp = initCmp();
        testing_1.expect(cmp.shouldHide(fixtures_1.default().itemSelectedNoFilter, 'selected')).toBe(false);
        testing_1.expect(cmp.shouldHide(fixtures_1.default().itemSelectedFilteredOutSelectable, 'selected')).toBe(false);
    });
});
// Instantiate component and initialize values
function initCmp(selectable, selected) {
    var cmp = new co_selectable_items_cmp_1.CoSelectableItemsCmp();
    cmp.selectableItems = selectable || fixtures_1.default().initSelectable;
    cmp.selectedItems = selected || fixtures_1.default().initSelected;
    cmp.initValues();
    return cmp;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvdW5pdC9jby1zZWxlY3RhYmxlLWl0ZW1zLWNtcC5zcGVjLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSx3QkFBbUMsa0JBQ25DLENBQUMsQ0FEb0Q7QUFDckQseUJBQXFCLFlBQ3JCLENBQUMsQ0FEZ0M7QUFDakMsd0NBQXFDLG1EQUVyQyxDQUFDLENBRnVGO0FBRXhGLGtCQUFRLENBQUMsc0JBQXNCLEVBQUU7SUFDL0IsWUFBRSxDQUFDLG1CQUFtQixFQUFFO1FBQ3RCLGdCQUFNLENBQUMsOENBQW9CLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtJQUM1QyxDQUFDLENBQUMsQ0FBQTtJQUVGLFlBQUUsQ0FBQyxvQ0FBb0MsRUFBRTtRQUN2QyxJQUFJLEdBQUcsR0FBRyxPQUFPLEVBQUUsQ0FBQTtRQUNuQixnQkFBTSxDQUFDLGtCQUFRLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxDQUFBO0lBQzFELENBQUMsQ0FBQyxDQUFBO0lBRUYsWUFBRSxDQUFDLHNGQUFzRixFQUFFO1FBQ3pGLElBQUksR0FBRyxHQUFHLE9BQU8sQ0FBQyxJQUFJLEVBQUUsa0JBQVEsRUFBRSxDQUFDLDhCQUE4QixDQUFDLENBQUE7UUFDbEUsZ0JBQU0sQ0FBQyxrQkFBUSxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsQ0FBQTtJQUMxRCxDQUFDLENBQUMsQ0FBQTtJQUVGLFlBQUUsQ0FBQyxpREFBaUQsRUFBRTtRQUNwRCxJQUFJLEdBQUcsR0FBRyxJQUFJLDhDQUFvQixFQUFFLENBQUE7UUFDcEMsSUFBSSxPQUFPLEdBQUcsR0FBRyxDQUFDLFVBQVUsQ0FBQyxZQUFZLEVBQUUsTUFBTSxDQUFDLENBQUE7UUFDbEQsZ0JBQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7SUFDNUIsQ0FBQyxDQUFDLENBQUE7SUFFRixZQUFFLENBQUMsNERBQTRELEVBQUU7UUFDL0QsSUFBSSxHQUFHLEdBQUcsSUFBSSw4Q0FBb0IsRUFBRSxDQUFBO1FBQ3BDLElBQUksT0FBTyxHQUFHLEdBQUcsQ0FBQyxVQUFVLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQyxDQUFBO1FBQ2hELGdCQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO0lBQzVCLENBQUMsQ0FBQyxDQUFBO0lBRUYsWUFBRSxDQUFDLG9EQUFvRCxFQUFFO1FBQ3ZELElBQUksR0FBRyxHQUFHLElBQUksOENBQW9CLEVBQUUsQ0FBQTtRQUNwQyxJQUFJLGNBQWMsR0FBRyxrQkFBUSxFQUFFLENBQUMsb0JBQW9CLENBQUE7UUFDcEQsR0FBRyxDQUFDLGNBQWMsQ0FBQyxjQUFjLEVBQUUsUUFBUSxDQUFDLENBQUE7UUFDNUMsSUFBSSxnQkFBZ0IsR0FBRyxrQkFBUSxFQUFFLENBQUMsMkJBQTJCLENBQUE7UUFDN0QsZ0JBQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQTtJQUNsRCxDQUFDLENBQUMsQ0FBQTtJQUVGLFlBQUUsQ0FBQyxvREFBb0QsRUFBRTtRQUN2RCxJQUFJLEdBQUcsR0FBRyxJQUFJLDhDQUFvQixFQUFFLENBQUE7UUFDcEMsSUFBSSxjQUFjLEdBQUcsa0JBQVEsRUFBRSxDQUFDLG9CQUFvQixDQUFBO1FBQ3BELEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxjQUFjLEVBQUUsUUFBUSxDQUFDLENBQUE7UUFDOUMsZ0JBQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQyxPQUFPLENBQUMsa0JBQVEsRUFBRSxDQUFDLDZCQUE2QixDQUFDLENBQUE7SUFDMUUsQ0FBQyxDQUFDLENBQUE7SUFFRixZQUFFLENBQUMsK0JBQStCLEVBQUU7UUFDbEMsSUFBSSxHQUFHLEdBQUcsT0FBTyxFQUFFLENBQUE7UUFDbkIsR0FBRyxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFDdEMsZ0JBQU0sQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUMsT0FBTyxDQUFDLGtCQUFRLEVBQUUsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFBO1FBQ2xFLGdCQUFNLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxrQkFBUSxFQUFFLENBQUMsc0JBQXNCLENBQUMsQ0FBQTtJQUN4RSxDQUFDLENBQUMsQ0FBQTtJQUVGLFlBQUUsQ0FBQyxpQ0FBaUMsRUFBRTtRQUNwQyxJQUFJLEdBQUcsR0FBRyxPQUFPLEVBQUUsQ0FBQTtRQUNuQixHQUFHLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtRQUN4QyxnQkFBTSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsQ0FBQyxPQUFPLENBQUMsa0JBQVEsRUFBRSxDQUFDLHdCQUF3QixDQUFDLENBQUE7UUFDdEUsZ0JBQU0sQ0FBQyxHQUFHLENBQUMsZUFBZSxDQUFDLENBQUMsT0FBTyxDQUFDLGtCQUFRLEVBQUUsQ0FBQywwQkFBMEIsQ0FBQyxDQUFBO0lBQzVFLENBQUMsQ0FBQyxDQUFBO0lBRUYsWUFBRSxDQUFDLHdFQUF3RSxFQUFFO1FBQzNFLElBQUksR0FBRyxHQUFHLE9BQU8sQ0FBQyxJQUFJLEVBQUUsa0JBQVEsRUFBRSxDQUFDLDhCQUE4QixDQUFDLENBQUE7UUFDbEUsR0FBRyxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFDeEMsZ0JBQU0sQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUMsT0FBTyxDQUFDLGtCQUFRLEVBQUUsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFBO1FBQ3RFLGdCQUFNLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxrQkFBUSxFQUFFLENBQUMsMEJBQTBCLENBQUMsQ0FBQTtJQUM1RSxDQUFDLENBQUMsQ0FBQTtJQUVGLFlBQUUsQ0FBQyxxREFBcUQsRUFBRTtRQUN4RCxJQUFJLEdBQUcsR0FBRyxPQUFPLEVBQUUsQ0FBQTtRQUNuQixHQUFHLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxDQUFDLGVBQWUsRUFBRSxHQUFHLENBQUMsQ0FBQTtRQUM5QyxHQUFHLENBQUMsaUJBQWlCLEVBQUUsQ0FBQTtRQUN2QixnQkFBTSxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsQ0FBQyxPQUFPLENBQUMsa0JBQVEsRUFBRSxDQUFDLHdCQUF3QixDQUFDLENBQUE7UUFDeEUsZ0JBQU0sQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUMsT0FBTyxDQUFDLGtCQUFRLEVBQUUsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFBO0lBQ3RFLENBQUMsQ0FBQyxDQUFBO0lBRUYsWUFBRSxDQUFDLHFEQUFxRCxFQUFFO1FBQ3hELElBQUksR0FBRyxHQUFHLE9BQU8sRUFBRSxDQUFBO1FBQ25CLEdBQUcsQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLGVBQWUsRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUM3QyxHQUFHLENBQUMsbUJBQW1CLEVBQUUsQ0FBQTtRQUN6QixnQkFBTSxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsQ0FBQyxPQUFPLENBQUMsa0JBQVEsRUFBRSxDQUFDLDBCQUEwQixDQUFDLENBQUE7UUFDMUUsZ0JBQU0sQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUMsT0FBTyxDQUFDLGtCQUFRLEVBQUUsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFBO0lBQ3hFLENBQUMsQ0FBQyxDQUFBO0lBRUYseUJBQXlCO0lBRXpCLFlBQUUsQ0FBQyxxREFBcUQsRUFBRTtRQUN4RCxJQUFJLEdBQUcsR0FBRyxPQUFPLEVBQUUsQ0FBQTtRQUNuQixnQkFBTSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsa0JBQVEsRUFBRSxDQUFDLG9CQUFvQixFQUFFLFlBQVksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO1FBQ2hGLGdCQUFNLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxrQkFBUSxFQUFFLENBQUMsK0JBQStCLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDM0YsZ0JBQU0sQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLGtCQUFRLEVBQUUsQ0FBQyxpQ0FBaUMsRUFBRSxZQUFZLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUM3RixnQkFBTSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsa0JBQVEsRUFBRSxDQUFDLDJCQUEyQixFQUFFLFlBQVksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO0lBQ3pGLENBQUMsQ0FBQyxDQUFBO0lBRUYsWUFBRSxDQUFDLHVEQUF1RCxFQUFFO1FBQzFELElBQUksR0FBRyxHQUFHLE9BQU8sRUFBRSxDQUFBO1FBQ25CLGdCQUFNLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxrQkFBUSxFQUFFLENBQUMsdUJBQXVCLEVBQUUsVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDakYsZ0JBQU0sQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLGtCQUFRLEVBQUUsQ0FBQyxrQ0FBa0MsRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUM1RixnQkFBTSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsa0JBQVEsRUFBRSxDQUFDLG9DQUFvQyxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO1FBQzlGLGdCQUFNLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxrQkFBUSxFQUFFLENBQUMsOEJBQThCLEVBQUUsVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7SUFDMUYsQ0FBQyxDQUFDLENBQUE7SUFFRixZQUFFLENBQUMsb0VBQW9FLEVBQUU7UUFDdkUsSUFBSSxHQUFHLEdBQUcsT0FBTyxFQUFFLENBQUE7UUFDbkIsZ0JBQU0sQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLGtCQUFRLEVBQUUsQ0FBQyxvQ0FBb0MsRUFBRSxZQUFZLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUNoRyxnQkFBTSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsa0JBQVEsRUFBRSxDQUFDLDhCQUE4QixFQUFFLFlBQVksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO0lBQzVGLENBQUMsQ0FBQyxDQUFBO0lBRUYsWUFBRSxDQUFDLGdFQUFnRSxFQUFFO1FBQ25FLElBQUksR0FBRyxHQUFHLE9BQU8sRUFBRSxDQUFBO1FBQ25CLGdCQUFNLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxrQkFBUSxFQUFFLENBQUMsK0JBQStCLEVBQUUsVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDekYsZ0JBQU0sQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLGtCQUFRLEVBQUUsQ0FBQywyQkFBMkIsRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUN2RixDQUFDLENBQUMsQ0FBQTtJQUVGLFlBQUUsQ0FBQywwRUFBMEUsRUFBRTtRQUM3RSxJQUFJLEdBQUcsR0FBRyxPQUFPLEVBQUUsQ0FBQTtRQUNuQixnQkFBTSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsa0JBQVEsRUFBRSxDQUFDLHVCQUF1QixFQUFFLFlBQVksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFBO1FBQ3BGLGdCQUFNLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxrQkFBUSxFQUFFLENBQUMsa0NBQWtDLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUE7SUFDakcsQ0FBQyxDQUFDLENBQUE7SUFFRixZQUFFLENBQUMsb0VBQW9FLEVBQUU7UUFDdkUsSUFBSSxHQUFHLEdBQUcsT0FBTyxFQUFFLENBQUE7UUFDbkIsZ0JBQU0sQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLGtCQUFRLEVBQUUsQ0FBQyxvQkFBb0IsRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQTtRQUMvRSxnQkFBTSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsa0JBQVEsRUFBRSxDQUFDLGlDQUFpQyxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFBO0lBQzlGLENBQUMsQ0FBQyxDQUFBO0FBQ0osQ0FBQyxDQUFDLENBQUE7QUFFRiw4Q0FBOEM7QUFDOUMsaUJBQWtCLFVBQVcsRUFBRSxRQUFTO0lBQ3RDLElBQUksR0FBRyxHQUFHLElBQUksOENBQW9CLEVBQUUsQ0FBQTtJQUNwQyxHQUFHLENBQUMsZUFBZSxHQUFHLFVBQVUsSUFBSSxrQkFBUSxFQUFFLENBQUMsY0FBYyxDQUFBO0lBQzdELEdBQUcsQ0FBQyxhQUFhLEdBQUcsUUFBUSxJQUFJLGtCQUFRLEVBQUUsQ0FBQyxZQUFZLENBQUE7SUFDdkQsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFBO0lBQ2hCLE1BQU0sQ0FBQyxHQUFHLENBQUE7QUFDWixDQUFDIiwiZmlsZSI6InRlc3QvdW5pdC9jby1zZWxlY3RhYmxlLWl0ZW1zLWNtcC5zcGVjLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtpdCwgZGVzY3JpYmUsIGV4cGVjdH0gZnJvbSAnYW5ndWxhcjIvdGVzdGluZydcbmltcG9ydCBmaXh0dXJlcyBmcm9tICcuL2ZpeHR1cmVzJ1xuaW1wb3J0IHsgQ29TZWxlY3RhYmxlSXRlbXNDbXAgfSBmcm9tICcuLi8uLi9jby1zZWxlY3RhYmxlLWl0ZW1zL2NvLXNlbGVjdGFibGUtaXRlbXMtY21wJ1xuXG5kZXNjcmliZSgnQ29TZWxlY3RhYmxlSXRlbXNDbXAnLCAoKSA9PiB7XG4gIGl0KCdTaG91bGQgYmUgZGVmaW5lZCcsICgpID0+IHtcbiAgICBleHBlY3QoQ29TZWxlY3RhYmxlSXRlbXNDbXApLnRvQmVEZWZpbmVkKClcbiAgfSlcblxuICBpdCgnU2hvdWxkIGluaXRpYWxpc2UgdmFsdWVzIGNvcnJlY3RseScsICgpID0+IHtcbiAgICBsZXQgY21wID0gaW5pdENtcCgpXG4gICAgZXhwZWN0KGZpeHR1cmVzKCkuaW5pdERvbmUpLnRvRXF1YWwoY21wLnNlbGVjdGFibGVJdGVtcylcbiAgfSlcblxuICBpdCgnU2hvdWxkIGluaXRpYWxpc2UgdmFsdWVzIGNvcnJlY3RseSBldmVuIGlmIG9iamVjdCBwcm9wZXJ0aWVzIGFyZSBvcmRlcmVkIGRpZmZlcmVudGx5JywgKCkgPT4ge1xuICAgIGxldCBjbXAgPSBpbml0Q21wKG51bGwsIGZpeHR1cmVzKCkuaW5pdFNlbGVjdGVkRGlmZmVyZW50UHJvcE9yZGVyKVxuICAgIGV4cGVjdChmaXh0dXJlcygpLmluaXREb25lKS50b0VxdWFsKGNtcC5zZWxlY3RhYmxlSXRlbXMpXG4gIH0pXG5cbiAgaXQoJ1Nob3VsZCBiZSBhYmxlIHRvIGZpbHRlciBvbiBleGFjdCBwYXJ0aWFsIG1hdGNoJywgKCkgPT4ge1xuICAgIGxldCBjbXAgPSBuZXcgQ29TZWxlY3RhYmxlSXRlbXNDbXAoKVxuICAgIGxldCBtYXRjaGVkID0gY21wLmZpbHRlckl0ZW0oJ1NvbWVTdHJpbmcnLCAnU29tZScpXG4gICAgZXhwZWN0KG1hdGNoZWQpLnRvQmUodHJ1ZSlcbiAgfSlcblxuICBpdCgnU2hvdWxkIGJlIGFibGUgdG8gZmlsdGVyIG9uIGNhc2UgaW5zZW5zaXRpdmUgcGFydGlhbCBtYXRjaCcsICgpID0+IHtcbiAgICBsZXQgY21wID0gbmV3IENvU2VsZWN0YWJsZUl0ZW1zQ21wKClcbiAgICBsZXQgbWF0Y2hlZCA9IGNtcC5maWx0ZXJJdGVtKCdTb21lU3RyaW5nJywgJ3NvJylcbiAgICBleHBlY3QobWF0Y2hlZCkudG9CZSh0cnVlKVxuICB9KVxuXG4gIGl0KCdTaG91bGQgbm90IGhpZGUgc2VsZWN0YWJsZSB3aGVuIGZpbHRlcmluZyBzZWxlY3RlZCcsICgpID0+IHtcbiAgICBsZXQgY21wID0gbmV3IENvU2VsZWN0YWJsZUl0ZW1zQ21wKClcbiAgICBsZXQgc2VsZWN0YWJsZUxpc3QgPSBmaXh0dXJlcygpLmZpbHRlcklzb2xhdGVkQmVmb3JlXG4gICAgY21wLmZpbHRlclNlbGVjdGVkKHNlbGVjdGFibGVMaXN0LCAnUmFuZG9tJylcbiAgICBsZXQgc2VsZWN0ZWRFeHBlY3RlZCA9IGZpeHR1cmVzKCkuZmlsdGVySXNvbGF0ZWRTZWxlY3RlZEFmdGVyXG4gICAgZXhwZWN0KHNlbGVjdGFibGVMaXN0KS50b0VxdWFsKHNlbGVjdGVkRXhwZWN0ZWQpXG4gIH0pXG5cbiAgaXQoJ1Nob3VsZCBub3QgaGlkZSBzZWxlY3RlZCB3aGVuIGZpbHRlcmluZyBzZWxlY3RhYmxlJywgKCkgPT4ge1xuICAgIGxldCBjbXAgPSBuZXcgQ29TZWxlY3RhYmxlSXRlbXNDbXAoKVxuICAgIGxldCBzZWxlY3RhYmxlTGlzdCA9IGZpeHR1cmVzKCkuZmlsdGVySXNvbGF0ZWRCZWZvcmVcbiAgICBjbXAuZmlsdGVyU2VsZWN0YWJsZShzZWxlY3RhYmxlTGlzdCwgJ1JhbmRvbScpXG4gICAgZXhwZWN0KHNlbGVjdGFibGVMaXN0KS50b0VxdWFsKGZpeHR1cmVzKCkuZmlsdGVySXNvbGF0ZWRTZWxlY3RhYmxlQWZ0ZXIpXG4gIH0pXG5cbiAgaXQoJ1Nob3VsZCBiZSBhYmxlIHRvIHNlbGVjdCBpdGVtJywgKCkgPT4ge1xuICAgIGxldCBjbXAgPSBpbml0Q21wKClcbiAgICBjbXAuc2VsZWN0SXRlbShjbXAuc2VsZWN0YWJsZUl0ZW1zWzFdKVxuICAgIGV4cGVjdChjbXAuc2VsZWN0ZWRJdGVtcykudG9FcXVhbChmaXh0dXJlcygpLnNlbGVjdGVkQmVhclNlbGVjdGVkKVxuICAgIGV4cGVjdChjbXAuc2VsZWN0YWJsZUl0ZW1zKS50b0VxdWFsKGZpeHR1cmVzKCkuc2VsZWN0ZWRCZWFyU2VsZWN0YWJsZSlcbiAgfSlcblxuICBpdCgnU2hvdWxkIGJlIGFibGUgdG8gZGVzZWxlY3QgaXRlbScsICgpID0+IHtcbiAgICBsZXQgY21wID0gaW5pdENtcCgpXG4gICAgY21wLmRlc2VsZWN0SXRlbShjbXAuc2VsZWN0YWJsZUl0ZW1zWzJdKVxuICAgIGV4cGVjdChjbXAuc2VsZWN0ZWRJdGVtcykudG9FcXVhbChmaXh0dXJlcygpLmRlc2VsZWN0ZWRDYWN0dXNTZWxlY3RlZClcbiAgICBleHBlY3QoY21wLnNlbGVjdGFibGVJdGVtcykudG9FcXVhbChmaXh0dXJlcygpLmRlc2VsZWN0ZWRDYWN0dXNTZWxlY3RhYmxlKVxuICB9KVxuXG4gIGl0KCdTaG91bGQgZGVzZWxlY3QgaXRlbSBldmVuIGlmIG9iamVjdCBwcm9wZXJ0aWVzIGFyZSBvcmRlcmVkIGRpZmZlcmVudGx5JywgKCkgPT4ge1xuICAgIGxldCBjbXAgPSBpbml0Q21wKG51bGwsIGZpeHR1cmVzKCkuaW5pdFNlbGVjdGVkRGlmZmVyZW50UHJvcE9yZGVyKVxuICAgIGNtcC5kZXNlbGVjdEl0ZW0oY21wLnNlbGVjdGFibGVJdGVtc1syXSlcbiAgICBleHBlY3QoY21wLnNlbGVjdGVkSXRlbXMpLnRvRXF1YWwoZml4dHVyZXMoKS5kZXNlbGVjdGVkQ2FjdHVzU2VsZWN0ZWQpXG4gICAgZXhwZWN0KGNtcC5zZWxlY3RhYmxlSXRlbXMpLnRvRXF1YWwoZml4dHVyZXMoKS5kZXNlbGVjdGVkQ2FjdHVzU2VsZWN0YWJsZSlcbiAgfSlcblxuICBpdCgnU2hvdWxkIGJlIGFibGUgdG8gc2VsZWN0IGFsbCBmaWx0ZXJlZCBpbiBzZWxlY3RhYmxlJywgKCkgPT4ge1xuICAgIGxldCBjbXAgPSBpbml0Q21wKClcbiAgICBjbXAuZmlsdGVyU2VsZWN0YWJsZShjbXAuc2VsZWN0YWJsZUl0ZW1zLCAnYScpXG4gICAgY21wLnNlbGVjdEFsbEZpbHRlcmVkKClcbiAgICBleHBlY3QoY21wLnNlbGVjdGFibGVJdGVtcykudG9FcXVhbChmaXh0dXJlcygpLnNlbGVjdEZpbHRlcmVkU2VsZWN0YWJsZSlcbiAgICBleHBlY3QoY21wLnNlbGVjdGVkSXRlbXMpLnRvRXF1YWwoZml4dHVyZXMoKS5zZWxlY3RGaWx0ZXJlZFNlbGVjdGVkKVxuICB9KVxuXG4gIGl0KCdTaG91bGQgYmUgYWJsZSB0byBkZXNlbGVjdCBhbGwgZmlsdGVyZWQgaW4gc2VsZWN0ZWQnLCAoKSA9PiB7XG4gICAgbGV0IGNtcCA9IGluaXRDbXAoKVxuICAgIGNtcC5maWx0ZXJTZWxlY3RlZChjbXAuc2VsZWN0YWJsZUl0ZW1zLCAnYWMnKVxuICAgIGNtcC5kZXNlbGVjdEFsbEZpbHRlcmVkKClcbiAgICBleHBlY3QoY21wLnNlbGVjdGFibGVJdGVtcykudG9FcXVhbChmaXh0dXJlcygpLmRlc2VsZWN0RmlsdGVyZWRTZWxlY3RhYmxlKVxuICAgIGV4cGVjdChjbXAuc2VsZWN0ZWRJdGVtcykudG9FcXVhbChmaXh0dXJlcygpLmRlc2VsZWN0RmlsdGVyZWRTZWxlY3RlZClcbiAgfSlcblxuICAvLyBSdWxlcyBmb3IgaGlkaW5nIGl0ZW1zXG5cbiAgaXQoJ1Nob3VsZCBoaWRlIHNlbGVjdGVkIGl0ZW1zIGZyb20gdGhlIHNlbGVjdGFibGUgbGlzdCcsICgpID0+IHtcbiAgICBsZXQgY21wID0gaW5pdENtcCgpXG4gICAgZXhwZWN0KGNtcC5zaG91bGRIaWRlKGZpeHR1cmVzKCkuaXRlbVNlbGVjdGVkTm9GaWx0ZXIsICdzZWxlY3RhYmxlJykpLnRvQmUodHJ1ZSlcbiAgICBleHBlY3QoY21wLnNob3VsZEhpZGUoZml4dHVyZXMoKS5pdGVtU2VsZWN0ZWRGaWx0ZXJlZE91dFNlbGVjdGVkLCAnc2VsZWN0YWJsZScpKS50b0JlKHRydWUpXG4gICAgZXhwZWN0KGNtcC5zaG91bGRIaWRlKGZpeHR1cmVzKCkuaXRlbVNlbGVjdGVkRmlsdGVyZWRPdXRTZWxlY3RhYmxlLCAnc2VsZWN0YWJsZScpKS50b0JlKHRydWUpXG4gICAgZXhwZWN0KGNtcC5zaG91bGRIaWRlKGZpeHR1cmVzKCkuaXRlbVNlbGVjdGVkRmlsdGVyZWRPdXRCb3RoLCAnc2VsZWN0YWJsZScpKS50b0JlKHRydWUpXG4gIH0pXG5cbiAgaXQoJ1Nob3VsZCBoaWRlIG5vdC1zZWxlY3RlZCBpdGVtcyBmcm9tIHRoZSBzZWxlY3RlZCBsaXN0JywgKCkgPT4ge1xuICAgIGxldCBjbXAgPSBpbml0Q21wKClcbiAgICBleHBlY3QoY21wLnNob3VsZEhpZGUoZml4dHVyZXMoKS5pdGVtTm90U2VsZWN0ZWROb0ZpbHRlciwgJ3NlbGVjdGVkJykpLnRvQmUodHJ1ZSlcbiAgICBleHBlY3QoY21wLnNob3VsZEhpZGUoZml4dHVyZXMoKS5pdGVtTm90U2VsZWN0ZWRGaWx0ZXJlZE91dFNlbGVjdGVkLCAnc2VsZWN0ZWQnKSkudG9CZSh0cnVlKVxuICAgIGV4cGVjdChjbXAuc2hvdWxkSGlkZShmaXh0dXJlcygpLml0ZW1Ob3RTZWxlY3RlZEZpbHRlcmVkT3V0U2VsZWN0YWJsZSwgJ3NlbGVjdGVkJykpLnRvQmUodHJ1ZSlcbiAgICBleHBlY3QoY21wLnNob3VsZEhpZGUoZml4dHVyZXMoKS5pdGVtTm90U2VsZWN0ZWRGaWx0ZXJlZE91dEJvdGgsICdzZWxlY3RlZCcpKS50b0JlKHRydWUpXG4gIH0pXG5cbiAgaXQoJ1Nob3VsZCBoaWRlIGZpbHRlcmVkIG91dCBzZWxlY3RhYmxlIGl0ZW1zIGZyb20gdGhlIHNlbGVjdGFibGUgbGlzdCcsICgpID0+IHtcbiAgICBsZXQgY21wID0gaW5pdENtcCgpXG4gICAgZXhwZWN0KGNtcC5zaG91bGRIaWRlKGZpeHR1cmVzKCkuaXRlbU5vdFNlbGVjdGVkRmlsdGVyZWRPdXRTZWxlY3RhYmxlLCAnc2VsZWN0YWJsZScpKS50b0JlKHRydWUpXG4gICAgZXhwZWN0KGNtcC5zaG91bGRIaWRlKGZpeHR1cmVzKCkuaXRlbU5vdFNlbGVjdGVkRmlsdGVyZWRPdXRCb3RoLCAnc2VsZWN0YWJsZScpKS50b0JlKHRydWUpXG4gIH0pXG5cbiAgaXQoJ1Nob3VsZCBoaWRlIGZpbHRlcmVkIG91dCBzZWxlY3RlZCBpdGVtcyBmcm9tIHRoZSBzZWxlY3RlZCBsaXN0JywgKCkgPT4ge1xuICAgIGxldCBjbXAgPSBpbml0Q21wKClcbiAgICBleHBlY3QoY21wLnNob3VsZEhpZGUoZml4dHVyZXMoKS5pdGVtU2VsZWN0ZWRGaWx0ZXJlZE91dFNlbGVjdGVkLCAnc2VsZWN0ZWQnKSkudG9CZSh0cnVlKVxuICAgIGV4cGVjdChjbXAuc2hvdWxkSGlkZShmaXh0dXJlcygpLml0ZW1TZWxlY3RlZEZpbHRlcmVkT3V0Qm90aCwgJ3NlbGVjdGVkJykpLnRvQmUodHJ1ZSlcbiAgfSlcblxuICBpdCgnU2hvdWxkIG5vdCBoaWRlIG5vbi1maWx0ZXJlZCBub24tc2VsZWN0ZWQgaXRlbXMgZnJvbSB0aGUgc2VsZWN0YWJsZSBsaXN0JywgKCkgPT4ge1xuICAgIGxldCBjbXAgPSBpbml0Q21wKClcbiAgICBleHBlY3QoY21wLnNob3VsZEhpZGUoZml4dHVyZXMoKS5pdGVtTm90U2VsZWN0ZWROb0ZpbHRlciwgJ3NlbGVjdGFibGUnKSkudG9CZShmYWxzZSlcbiAgICBleHBlY3QoY21wLnNob3VsZEhpZGUoZml4dHVyZXMoKS5pdGVtTm90U2VsZWN0ZWRGaWx0ZXJlZE91dFNlbGVjdGVkLCAnc2VsZWN0YWJsZScpKS50b0JlKGZhbHNlKVxuICB9KVxuXG4gIGl0KCdTaG91bGQgbm90IGhpZGUgbm9uLWZpbHRlcmVkIHNlbGVjdGVkIGl0ZW1zIGZyb20gdGhlIHNlbGVjdGVkIGxpc3QnLCAoKSA9PiB7XG4gICAgbGV0IGNtcCA9IGluaXRDbXAoKVxuICAgIGV4cGVjdChjbXAuc2hvdWxkSGlkZShmaXh0dXJlcygpLml0ZW1TZWxlY3RlZE5vRmlsdGVyLCAnc2VsZWN0ZWQnKSkudG9CZShmYWxzZSlcbiAgICBleHBlY3QoY21wLnNob3VsZEhpZGUoZml4dHVyZXMoKS5pdGVtU2VsZWN0ZWRGaWx0ZXJlZE91dFNlbGVjdGFibGUsICdzZWxlY3RlZCcpKS50b0JlKGZhbHNlKVxuICB9KVxufSlcblxuLy8gSW5zdGFudGlhdGUgY29tcG9uZW50IGFuZCBpbml0aWFsaXplIHZhbHVlc1xuZnVuY3Rpb24gaW5pdENtcCAoc2VsZWN0YWJsZT8sIHNlbGVjdGVkPykge1xuICBsZXQgY21wID0gbmV3IENvU2VsZWN0YWJsZUl0ZW1zQ21wKClcbiAgY21wLnNlbGVjdGFibGVJdGVtcyA9IHNlbGVjdGFibGUgfHwgZml4dHVyZXMoKS5pbml0U2VsZWN0YWJsZVxuICBjbXAuc2VsZWN0ZWRJdGVtcyA9IHNlbGVjdGVkIHx8IGZpeHR1cmVzKCkuaW5pdFNlbGVjdGVkXG4gIGNtcC5pbml0VmFsdWVzKClcbiAgcmV0dXJuIGNtcFxufSJdLCJzb3VyY2VSb290IjoiL25vZGVfbW9kdWxlcyJ9
